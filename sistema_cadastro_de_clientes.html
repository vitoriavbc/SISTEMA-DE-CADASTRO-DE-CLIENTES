<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Cadastro de Clientes - DEMO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --secondary: #2ecc71;
            --secondary-dark: #27ae60;
            --danger: #e74c3c;
            --danger-dark: #c0392b;
            --warning: #f39c12;
            --warning-dark: #e67e22;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --purple: #9b59b6;
            --teal: #1abc9c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary) 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            position: relative;
        }
        
        header p {
            opacity: 0.9;
            font-size: 16px;
            position: relative;
        }
        
        .app-body {
            display: flex;
            min-height: 650px;
        }
        
        .form-section {
            flex: 1;
            padding: 30px;
            background: var(--light);
            border-right: 1px solid #ddd;
        }
        
        .list-section {
            flex: 1.2;
            padding: 30px;
            background: white;
            overflow-y: auto;
            max-height: 650px;
        }
        
        .form-group {
            margin-bottom: 22px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 15px;
        }
        
        input, select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
        }
        
        input:focus, select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
            transform: translateY(-2px);
        }
        
        .input-error {
            border-color: var(--danger);
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .error-message {
            color: var(--danger);
            font-size: 14px;
            margin-top: 6px;
            display: none;
        }
        
        small {
            display: block;
            margin-top: 6px;
            color: var(--gray);
            font-size: 13px;
        }
        
        .buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }
        
        button {
            padding: 14px 22px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            flex: 2;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(52, 152, 219, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--gray) 0%, #7f8c8d 100%);
            color: white;
            flex: 1;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(149, 165, 166, 0.4);
        }
        
        .btn-edit {
            background: linear-gradient(135deg, var(--warning) 0%, var(--warning-dark) 100%);
            color: white;
            padding: 9px 16px;
            font-size: 14px;
        }
        
        .btn-edit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(243, 156, 18, 0.4);
        }
        
        .btn-delete {
            background: linear-gradient(135deg, var(--danger) 0%, var(--danger-dark) 100%);
            color: white;
            padding: 9px 16px;
            font-size: 14px;
        }
        
        .btn-delete:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(231, 76, 60, 0.4);
        }
        
        .message {
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 22px;
            display: none;
            animation: fadeIn 0.5s;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        
        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }
        
        .client-list h2 {
            margin-bottom: 22px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--light);
            color: var(--dark);
            font-size: 24px;
        }
        
        .client-item {
            padding: 22px;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin-bottom: 18px;
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .client-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--primary);
        }
        
        .client-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .client-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .client-name {
            font-size: 19px;
            font-weight: 700;
            color: var(--dark);
        }
        
        .client-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-ativo {
            background: #d4edda;
            color: #155724;
        }
        
        .status-inativo {
            background: #f8d7da;
            color: #721c24;
        }
        
        .client-details {
            margin-bottom: 18px;
            color: #555;
        }
        
        .client-details div {
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .client-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 18px;
            padding-top: 18px;
            border-top: 1px solid #eee;
        }
        
        .client-actions {
            display: flex;
            gap: 10px;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px 22px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 60px;
            margin-bottom: 18px;
            opacity: 0.5;
        }
        
        .empty-state p {
            font-size: 18px;
        }
        
        .search-box {
            margin-bottom: 22px;
            position: relative;
        }
        
        .search-box input {
            padding-left: 45px;
        }
        
        .search-box i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            z-index: 1;
        }
        
        .stats-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            flex: 1;
            background: white;
            padding: 18px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-top: 4px solid var(--primary);
        }
        
        .stat-card h3 {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 8px;
        }
        
        .stat-card .number {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
        }
        
        .stat-card.ativo {
            border-top-color: var(--secondary);
        }
        
        .stat-card.inativo {
            border-top-color: var(--danger);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Modal de confirmação */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal h3 {
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .modal p {
            margin-bottom: 25px;
            color: var(--gray);
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .modal-btn.confirm {
            background: var(--danger);
            color: white;
        }
        
        .modal-btn.cancel {
            background: var(--gray);
            color: white;
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .app-body {
                flex-direction: column;
            }
            
            .form-section {
                border-right: none;
                border-bottom: 1px solid #ddd;
            }
            
            .stats-container {
                flex-direction: column;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Modal de confirmação para exclusão -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h3><i class="fas fa-exclamation-triangle"></i> Confirmar Exclusão</h3>
            <p id="modalMessage">Tem certeza que deseja excluir este cliente? Esta ação não pode ser desfeita.</p>
            <div class="modal-buttons">
                <button class="modal-btn confirm" id="confirmDelete">
                    <i class="fas fa-trash"></i> Sim, Excluir
                </button>
                <button class="modal-btn cancel" id="cancelDelete">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1><i class="fas fa-users"></i> Sistema de Cadastro de Clientes</h1>
            <p>Cadastre e gerencie seus clientes de forma eficiente</p>
        </header>
        
        <div class="app-body">
            <div class="form-section">
                <div id="message" class="message"></div>
                
                <form id="clientForm">
                    <div class="form-group">
                        <label for="nome">Nome completo *</label>
                        <input type="text" id="nome" name="nome" required placeholder="Digite o nome completo com pelo menos 2 sobrenomes">
                        <small>Exemplo: João Silva Oliveira</small>
                        <div class="error-message" id="nomeError">O nome deve conter pelo menos 2 sobrenomes</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">E-mail *</label>
                        <input type="email" id="email" name="email" required placeholder="exemplo@dominio.com">
                        <small>Formato: exemplo@dominio.com</small>
                        <div class="error-message" id="emailError">Digite um e-mail válido com @</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="cpf">CPF *</label>
                        <input type="text" id="cpf" name="cpf" required placeholder="000.000.000-00" maxlength="14">
                        <small>Formato: 000.000.000-00 (11 dígitos)</small>
                        <div class="error-message" id="cpfError">CPF deve conter 11 dígitos numéricos</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="telefone">Telefone *</label>
                        <input type="text" id="telefone" name="telefone" required placeholder="(00) 00000-0000" maxlength="15">
                        <small>Formato: (00) 00000-0000 (11 dígitos com DDD)</small>
                        <div class="error-message" id="telefoneError">Telefone deve conter 11 dígitos com DDD</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="cidade">Cidade *</label>
                        <select id="cidade" name="cidade" required>
                            <option value="">Selecione uma cidade</option>
                            <!-- Cidades serão carregadas via JavaScript -->
                        </select>
                        <div class="error-message" id="cidadeError">Selecione uma cidade</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" name="status">
                            <option value="ativo">Ativo</option>
                            <option value="inativo">Inativo</option>
                        </select>
                    </div>
                    
                    <div class="buttons">
                        <button type="submit" class="btn-primary" id="submitBtn">
                            <i class="fas fa-user-plus"></i> Cadastrar Cliente
                        </button>
                        <button type="button" class="btn-secondary" onclick="limparFormulario()">
                            <i class="fas fa-broom"></i> Limpar
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="list-section">
                <h2><i class="fas fa-list"></i> Clientes Cadastrados</h2>
                
                <!-- Painel de estatísticas -->
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>TOTAL DE CLIENTES</h3>
                        <div class="number" id="totalClientes">0</div>
                    </div>
                    <div class="stat-card ativo">
                        <h3>CLIENTES ATIVOS</h3>
                        <div class="number" id="clientesAtivos">0</div>
                    </div>
                    <div class="stat-card inativo">
                        <h3>CLIENTES INATIVOS</h3>
                        <div class="number" id="clientesInativos">0</div>
                    </div>
                </div>
                
                <!-- Campo de busca -->
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Buscar cliente por nome, e-mail ou cidade...">
                </div>
                
                <div id="clientesCadastrados"></div>
            </div>
        </div>
    </div>

    <script>
        // Dados iniciais
        let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
        let nextId = JSON.parse(localStorage.getItem('nextId')) || 1;
        let editandoId = null;
        let clienteParaExcluir = null;

        // Lista expandida de cidades do Brasil
        const cidadesBrasil = [
            "São Paulo", "Rio de Janeiro", "Brasília", "Salvador", "Fortaleza",
            "Belo Horizonte", "Manaus", "Curitiba", "Recife", "Goiânia",
            "Belém", "Porto Alegre", "São Luís", "Maceió", "Campo Grande",
            "Teresina", "João Pessoa", "Natal", "Cuiabá", "Aracaju",
            "Florianópolis", "Macapá", "Porto Velho", "Rio Branco", "Boa Vista",
            "Vitória", "Palmas", "Guarulhos", "Campinas", "São Gonçalo",
            "Duque de Caxias", "São Bernardo do Campo", "Nova Iguaçu", "Santo André",
            "Osasco", "Sorocaba", "Ribeirão Preto", "Uberlândia", "Contagem",
            "Juiz de Fora", "Joinville", "Londrina", "Niterói", "Anápolis",
            "São José dos Campos", "Caxias do Sul", "Campos dos Goytacazes", "Serra",
            "Mauá", "Diadema", "Aparecida de Goiânia", "Jaboatão dos Guararapes",
            "São João de Meriti", "Feira de Santana", "Mossoró", "Vila Velha",
            "Cuiabá", "Petrópolis", "Cariacica", "Rio Verde", "Caucaia"
        ];

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            carregarCidades();
            atualizarListaClientes();
            configurarMascaras();
            atualizarEstatisticas();
            configurarModal();
            
            // Configurar busca em tempo real
            document.getElementById('searchInput').addEventListener('input', function() {
                filtrarClientes(this.value);
            });
        });

        // Configurar modal de confirmação
        function configurarModal() {
            const modalOverlay = document.getElementById('modalOverlay');
            const confirmBtn = document.getElementById('confirmDelete');
            const cancelBtn = document.getElementById('cancelDelete');
            
            confirmBtn.addEventListener('click', function() {
                if (clienteParaExcluir) {
                    excluirClienteConfirmado(clienteParaExcluir);
                }
                modalOverlay.style.display = 'none';
                clienteParaExcluir = null;
            });
            
            cancelBtn.addEventListener('click', function() {
                modalOverlay.style.display = 'none';
                clienteParaExcluir = null;
            });
            
            // Fechar modal clicando fora
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    modalOverlay.style.display = 'none';
                    clienteParaExcluir = null;
                }
            });
        }

        // Carregar cidades no select
        function carregarCidades() {
            const selectCidade = document.getElementById('cidade');
            cidadesBrasil.sort().forEach(cidade => {
                const option = document.createElement('option');
                option.value = cidade;
                option.textContent = cidade;
                selectCidade.appendChild(option);
            });
        }

        // Configurar máscaras para CPF e telefone
        function configurarMascaras() {
            const cpfInput = document.getElementById('cpf');
            const telefoneInput = document.getElementById('telefone');

            cpfInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length <= 11) {
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                }
                
                e.target.value = value;
            });

            telefoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length <= 11) {
                    value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
                    value = value.replace(/(\d{5})(\d)/, '$1-$2');
                }
                
                e.target.value = value;
            });
        }

        // Validações
        function validarNome(nome) {
            const partes = nome.trim().split(' ');
            return partes.length >= 3; // Nome + 2 sobrenomes
        }

        function validarEmail(email) {
            return email.includes('@') && email.includes('.') && email.length > 5;
        }

        function validarCPF(cpf) {
            const cpfLimpo = cpf.replace(/\D/g, '');
            return cpfLimpo.length === 11;
        }

        function validarTelefone(telefone) {
            const telefoneLimpo = telefone.replace(/\D/g, '');
            return telefoneLimpo.length === 11;
        }

        function validarCidade(cidade) {
            return cidade !== "";
        }

        function verificarClienteExistente(email, cpf, idIgnorado = null) {
            return clientes.some(cliente => 
                (cliente.email === email || cliente.cpf === cpf) && 
                cliente.id !== idIgnorado
            );
        }

        // Mostrar/ocultar mensagens de erro
        function mostrarErro(campoId, mostrar) {
            const campo = document.getElementById(campoId);
            const erro = document.getElementById(campoId + 'Error');
            
            if (mostrar) {
                campo.classList.add('input-error');
                erro.style.display = 'block';
            } else {
                campo.classList.remove('input-error');
                erro.style.display = 'none';
            }
        }

        // Evento de submissão do formulário
        document.getElementById('clientForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Adicionar efeito de loading no botão
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="loading"></div> Processando...';
            submitBtn.disabled = true;

            // Simular processamento
            setTimeout(() => {
                processarFormulario();
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 800);
        });

        function processarFormulario() {
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const cpf = document.getElementById('cpf').value;
            const telefone = document.getElementById('telefone').value;
            const cidade = document.getElementById('cidade').value;
            const status = document.getElementById('status').value;

            // Validar campos
            let formValido = true;

            if (!validarNome(nome)) {
                mostrarErro('nome', true);
                formValido = false;
            } else {
                mostrarErro('nome', false);
            }

            if (!validarEmail(email)) {
                mostrarErro('email', true);
                formValido = false;
            } else {
                mostrarErro('email', false);
            }

            if (!validarCPF(cpf)) {
                mostrarErro('cpf', true);
                formValido = false;
            } else {
                mostrarErro('cpf', false);
            }

            if (!validarTelefone(telefone)) {
                mostrarErro('telefone', true);
                formValido = false;
            } else {
                mostrarErro('telefone', false);
            }

            if (!validarCidade(cidade)) {
                mostrarErro('cidade', true);
                formValido = false;
            } else {
                mostrarErro('cidade', false);
            }

            if (!formValido) {
                showMessage('Por favor, corrija os erros no formulário!', 'error');
                return;
            }

            if (verificarClienteExistente(email, cpf, editandoId)) {
                showMessage('Já existe um cliente cadastrado com este e-mail ou CPF!', 'error');
                return;
            }

            // Salvar cliente
            if (editandoId) {
                // Modo edição
                const index = clientes.findIndex(c => c.id === editandoId);
                if (index !== -1) {
                    clientes[index] = {
                        ...clientes[index],
                        nome: nome,
                        email: email,
                        cpf: cpf,
                        telefone: telefone,
                        cidade: cidade,
                        status: status
                    };
                    showMessage('Cliente atualizado com sucesso!', 'success');
                }
                editandoId = null;
                document.querySelector('.btn-primary i').className = 'fas fa-user-plus';
                document.querySelector('.btn-primary').innerHTML = '<i class="fas fa-user-plus"></i> Cadastrar Cliente';
            } else {
                // Modo cadastro
                const cliente = {
                    id: nextId++,
                    nome: nome,
                    email: email,
                    cpf: cpf,
                    telefone: telefone,
                    cidade: cidade,
                    status: status,
                    dataCadastro: new Date().toLocaleDateString('pt-BR')
                };
                clientes.push(cliente);
                showMessage('Cliente cadastrado com sucesso!', 'success');
            }
            
            // Salvar no localStorage
            localStorage.setItem('clientes', JSON.stringify(clientes));
            localStorage.setItem('nextId', JSON.stringify(nextId));
            
            atualizarListaClientes();
            limparFormulario();
            atualizarEstatisticas(); // CORREÇÃO: Atualizar estatísticas após cadastro
        }

        // Função de filtro de clientes
        function filtrarClientes(termo) {
            const container = document.getElementById('clientesCadastrados');
            const clientesFiltrados = clientes.filter(cliente => 
                cliente.nome.toLowerCase().includes(termo.toLowerCase()) ||
                cliente.email.toLowerCase().includes(termo.toLowerCase()) ||
                cliente.cidade.toLowerCase().includes(termo.toLowerCase())
            );
            
            if (clientesFiltrados.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <p>Nenhum cliente encontrado para "${termo}"</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = "";
            clientesFiltrados.forEach(cliente => {
                const div = document.createElement('div');
                div.className = 'client-item';
                div.innerHTML = `
                    <div class="client-header">
                        <div class="client-name">${cliente.nome}</div>
                        <div class="client-status status-${cliente.status}">${cliente.status.toUpperCase()}</div>
                    </div>
                    <div class="client-details">
                        <div><i class="fas fa-envelope"></i> ${cliente.email}</div>
                        <div><i class="fas fa-phone"></i> ${cliente.telefone}</div>
                        <div><i class="fas fa-id-card"></i> CPF: ${cliente.cpf}</div>
                        <div><i class="fas fa-city"></i> ${cliente.cidade}</div>
                    </div>
                    <div class="client-footer">
                        <small><i class="fas fa-calendar"></i> Cadastrado em: ${cliente.dataCadastro}</small>
                        <div class="client-actions">
                            <button class="btn-edit" onclick="editarCliente(${cliente.id})">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn-delete" onclick="solicitarExclusaoCliente(${cliente.id}, '${cliente.nome}')">
                                <i class="fas fa-trash"></i> Excluir
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Atualizar lista de clientes
        function atualizarListaClientes() {
            const container = document.getElementById('clientesCadastrados');
            const termoBusca = document.getElementById('searchInput').value;
            
            if (termoBusca) {
                filtrarClientes(termoBusca);
                return;
            }
            
            container.innerHTML = "";

            if (clientes.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <p>Nenhum cliente cadastrado ainda.</p>
                    </div>
                `;
                return;
            }

            clientes.forEach(cliente => {
                const div = document.createElement('div');
                div.className = 'client-item';
                div.innerHTML = `
                    <div class="client-header">
                        <div class="client-name">${cliente.nome}</div>
                        <div class="client-status status-${cliente.status}">${cliente.status.toUpperCase()}</div>
                    </div>
                    <div class="client-details">
                        <div><i class="fas fa-envelope"></i> ${cliente.email}</div>
                        <div><i class="fas fa-phone"></i> ${cliente.telefone}</div>
                        <div><i class="fas fa-id-card"></i> CPF: ${cliente.cpf}</div>
                        <div><i class="fas fa-city"></i> ${cliente.cidade}</div>
                    </div>
                    <div class="client-footer">
                        <small><i class="fas fa-calendar"></i> Cadastrado em: ${cliente.dataCadastro}</small>
                        <div class="client-actions">
                            <button class="btn-edit" onclick="editarCliente(${cliente.id})">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn-delete" onclick="solicitarExclusaoCliente(${cliente.id}, '${cliente.nome}')">
                                <i class="fas fa-trash"></i> Excluir
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // CORREÇÃO: Função para atualizar estatísticas - AGORA FUNCIONANDO
        function atualizarEstatisticas() {
            const total = clientes.length;
            const ativos = clientes.filter(c => c.status === 'ativo').length;
            const inativos = clientes.filter(c => c.status === 'inativo').length;
            
            // CORREÇÃO: Atualizando os elementos corretamente
            document.getElementById('totalClientes').textContent = total;
            document.getElementById('clientesAtivos').textContent = ativos;
            document.getElementById('clientesInativos').textContent = inativos;
            
            console.log('Estatísticas atualizadas:', { total, ativos, inativos }); // Debug
        }

        // CORREÇÃO: Nova função para solicitar exclusão (abre o modal)
        function solicitarExclusaoCliente(id, nomeCliente) {
            clienteParaExcluir = id;
            const modalOverlay = document.getElementById('modalOverlay');
            const modalMessage = document.getElementById('modalMessage');
            
            modalMessage.textContent = `Tem certeza que deseja excluir o cliente "${nomeCliente}"? Esta ação não pode ser desfeita.`;
            modalOverlay.style.display = 'flex';
        }

        // CORREÇÃO: Função que executa a exclusão após confirmação
        function excluirClienteConfirmado(id) {
            console.log('Excluindo cliente ID:', id); // Debug
            console.log('Clientes antes:', clientes); // Debug
            
            // Filtra o cliente a ser excluído
            clientes = clientes.filter(cliente => cliente.id !== id);
            
            console.log('Clientes depois:', clientes); // Debug
            
            // Salva no localStorage
            localStorage.setItem('clientes', JSON.stringify(clientes));
            
            // Atualiza a interface
            atualizarListaClientes();
            atualizarEstatisticas(); // CORREÇÃO: Atualiza estatísticas após exclusão
            
            showMessage('Cliente excluído com sucesso!', 'success');
        }

        // Editar cliente
        function editarCliente(id) {
            const cliente = clientes.find(c => c.id === id);
            if (cliente) {
                document.getElementById('nome').value = cliente.nome;
                document.getElementById('email').value = cliente.email;
                document.getElementById('cpf').value = cliente.cpf;
                document.getElementById('telefone').value = cliente.telefone;
                document.getElementById('cidade').value = cliente.cidade;
                document.getElementById('status').value = cliente.status;
                
                editandoId = id;
                document.querySelector('.btn-primary i').className = 'fas fa-save';
                document.querySelector('.btn-primary').innerHTML = '<i class="fas fa-save"></i> Salvar Alterações';
                
                showMessage('Editando cliente - preencha os campos e clique em Salvar Alterações', 'success');
                
                // Rolar para o formulário
                document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Limpar formulário
        function limparFormulario() {
            document.getElementById('clientForm').reset();
            document.getElementById('message').innerHTML = "";
            editandoId = null;
            
            // Remover classes de erro
            document.querySelectorAll('.input-error').forEach(el => {
                el.classList.remove('input-error');
            });
            document.querySelectorAll('.error-message').forEach(el => {
                el.style.display = 'none';
            });
            
            // Restaurar texto do botão se estava em modo edição
            document.querySelector('.btn-primary i').className = 'fas fa-user-plus';
            document.querySelector('.btn-primary').innerHTML = '<i class="fas fa-user-plus"></i> Cadastrar Cliente';
            
            // Limpar campo de busca também
            document.getElementById('searchInput').value = '';
            atualizarListaClientes();
        }

        // Mostrar mensagens
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = 'message ' + type;
            
            setTimeout(() => {
                messageDiv.textContent = '';
                messageDiv.className = 'message';
            }, 5000);
        }

        // Adicionar alguns clientes de exemplo automaticamente
        function adicionarClientesExemplo() {
            if (clientes.length === 0) {
                const exemplos = [
                    {
                        id: nextId++,
                        nome: "Maria Silva Santos",
                        email: "maria.silva@email.com",
                        cpf: "123.456.789-00",
                        telefone: "(11) 98765-4321",
                        cidade: "São Paulo",
                        status: "ativo",
                        dataCadastro: new Date().toLocaleDateString('pt-BR')
                    },
                    {
                        id: nextId++,
                        nome: "João Oliveira Pereira",
                        email: "joao.oliveira@email.com",
                        cpf: "987.654.321-00",
                        telefone: "(21) 91234-5678",
                        cidade: "Rio de Janeiro",
                        status: "inativo",
                        dataCadastro: new Date().toLocaleDateString('pt-BR')
                    }
                ];
                
                clientes.push(...exemplos);
                localStorage.setItem('clientes', JSON.stringify(clientes));
                localStorage.setItem('nextId', JSON.stringify(nextId));
                atualizarListaClientes();
                atualizarEstatisticas();
                showMessage('Clientes de exemplo adicionados!', 'success');
            }
        }

        // Adicionar clientes de exemplo após um breve delay
        setTimeout(adicionarClientesExemplo, 1000);
    </script>
</body>
</html>